<?xml version="1.0" encoding="utf-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping https://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd">
  <entity repository-class="Eccube\Repository\OrderRepository" name="Eccube\Entity\Order" table="dtb_order" inheritance-type="SINGLE_TABLE">
    <discriminator-column name="discriminator_type" type="string" length="255"/>
    <discriminator-map>
      <discriminator-mapping value="order" class="Eccube\Entity\Order"/>
    </discriminator-map>
    <indexes>
      <index name="dtb_order_email_idx" columns="email"/>
      <index name="dtb_order_order_date_idx" columns="order_date"/>
      <index name="dtb_order_payment_date_idx" columns="payment_date"/>
      <index name="dtb_order_update_date_idx" columns="update_date"/>
      <index name="dtb_order_order_no_idx" columns="order_no"/>
    </indexes>
    <unique-constraints>
      <unique-constraint name="dtb_order_pre_order_id_idx" columns="pre_order_id"/>
    </unique-constraints>
    <id name="id" type="integer" column="id">
      <generator strategy="IDENTITY"/>
    </id>
    <field name="pre_order_id" type="string" column="pre_order_id" length="255" nullable="true"/>
    <field name="order_no" type="string" column="order_no" length="255" nullable="true"/>
    <field name="message" type="string" column="message" length="4000" nullable="true"/>
    <field name="name01" type="string" column="name01" length="255" nullable="false"/>
    <field name="name02" type="string" column="name02" length="255" nullable="false"/>
    <field name="kana01" type="string" column="kana01" length="255" nullable="true"/>
    <field name="kana02" type="string" column="kana02" length="255" nullable="true"/>
    <field name="company_name" type="string" column="company_name" length="255" nullable="true"/>
    <field name="email" type="string" column="email" length="255" nullable="true"/>
    <field name="phone_number" type="string" column="phone_number" length="14" nullable="true"/>
    <field name="postal_code" type="string" column="postal_code" length="8" nullable="true"/>
    <field name="addr01" type="string" column="addr01" length="255" nullable="true"/>
    <field name="addr02" type="string" column="addr02" length="255" nullable="true"/>
    <field name="birth" type="datetimetz" column="birth" nullable="true"/>
    <field name="subtotal" type="decimal" column="subtotal" precision="12" scale="2" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="discount" type="decimal" column="discount" precision="12" scale="2" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="delivery_fee_total" type="decimal" column="delivery_fee_total" precision="12" scale="2" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="charge" type="decimal" column="charge" precision="12" scale="2" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="tax" type="decimal" column="tax" precision="12" scale="2" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="total" type="decimal" column="total" precision="12" scale="2" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="payment_total" type="decimal" column="payment_total" precision="12" scale="2" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="payment_method" type="string" column="payment_method" length="255" nullable="true"/>
    <field name="note" type="string" column="note" length="4000" nullable="true"/>
    <field name="create_date" type="datetimetz" column="create_date" nullable="false"/>
    <field name="update_date" type="datetimetz" column="update_date" nullable="false"/>
    <field name="order_date" type="datetimetz" column="order_date" nullable="true"/>
    <field name="payment_date" type="datetimetz" column="payment_date" nullable="true"/>
    <field name="currency_code" type="string" column="currency_code" nullable="true"/>
    <field name="complete_message" type="text" column="complete_message" nullable="true"/>
    <field name="complete_mail_message" type="text" column="complete_mail_message" nullable="true"/>
    <field name="add_point" type="decimal" column="add_point" precision="12" scale="0" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <field name="use_point" type="decimal" column="use_point" precision="12" scale="0" nullable="false">
      <options>
        <option name="unsigned">1</option>
        <option name="default">0</option>
      </options>
    </field>
    <one-to-many field="OrderItems" target-entity="Eccube\Entity\OrderItem" mapped-by="Order" fetch="LAZY">
      <cascade>
        <cascade-remove/>
        <cascade-persist/>
      </cascade>
    </one-to-many>
    <one-to-many field="Shippings" target-entity="Eccube\Entity\Shipping" mapped-by="Order" fetch="LAZY">
      <cascade>
        <cascade-remove/>
        <cascade-persist/>
      </cascade>
    </one-to-many>
    <one-to-many field="MailHistories" target-entity="Eccube\Entity\MailHistory" mapped-by="Order" fetch="LAZY">
      <cascade>
        <cascade-remove/>
      </cascade>
      <order-by>
        <order-by-field name="send_date" direction="DESC"/>
      </order-by>
    </one-to-many>
    <many-to-one field="Customer" target-entity="Eccube\Entity\Customer" inversed-by="Orders" fetch="LAZY">
      <join-columns>
        <join-column name="customer_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="Country" target-entity="Eccube\Entity\Master\Country" fetch="LAZY">
      <join-columns>
        <join-column name="country_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="Pref" target-entity="Eccube\Entity\Master\Pref" fetch="LAZY">
      <join-columns>
        <join-column name="pref_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="Sex" target-entity="Eccube\Entity\Master\Sex" fetch="LAZY">
      <join-columns>
        <join-column name="sex_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="Job" target-entity="Eccube\Entity\Master\Job" fetch="LAZY">
      <join-columns>
        <join-column name="job_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="Payment" target-entity="Eccube\Entity\Payment" fetch="LAZY">
      <join-columns>
        <join-column name="payment_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="DeviceType" target-entity="Eccube\Entity\Master\DeviceType" fetch="LAZY">
      <join-columns>
        <join-column name="device_type_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="CustomerOrderStatus" target-entity="Eccube\Entity\Master\CustomerOrderStatus" fetch="LAZY">
      <join-columns>
        <join-column name="order_status_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="OrderStatusColor" target-entity="Eccube\Entity\Master\OrderStatusColor" fetch="LAZY">
      <join-columns>
        <join-column name="order_status_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
    <many-to-one field="OrderStatus" target-entity="Eccube\Entity\Master\OrderStatus" fetch="LAZY">
      <join-columns>
        <join-column name="order_status_id" referenced-column-name="id" nullable="true"/>
      </join-columns>
    </many-to-one>
  </entity>
</doctrine-mapping>
